# 單一錢包接口

- 目錄
 + [1 介面清單](#1-----)
 + [1.1 請求餘額更新](#11-----)
 + [1.1.1 傳入參數](#111-----)
 + [1.1.2 回傳參數](#112-----)
 + [2 附件](#2-----)
 + [2.1 action_type](#21-----)
 + [2.2 error_code](#22-----)

### <span id="1-----">1 介面清單</span>


#### <span id="11-----">1.1 請求餘額更新</span>

Header：Content-Type: application/json;charset=utf-8

##### <span id="111-----">1.1.1 傳入參數</span>

| 參數名稱 | 必填 | 類型 | 欄位長度 | 範例 | 說明 |
| ----------- | ---- | ------- | -------- | -------- | ------ ------------------ |
| transaction_id | 是 | string | 32 | 23985235 | 交易流水號 |
| member_id | 是 | string | 50 | YK398362287 | 頻道玩家ID |
| action_value | 是 | decimal | 18,2 | 820.00 | 資金變動的金額，正數代表增加，負數代表扣減，例如100代表餘額增加100，-200代表餘額扣減200 |
| action_type | 是 | int | 2 | 1 | 資金變動類型，詳見[附件2.1資金變動類型](#21-----)說明 |
| order_id | | string | 50 | S03827836 | 如涉及投注訂單，這裡會傳訂單號；如果不涉及訂單，可能為空 |
| remarks | | string | 100 | 01034388769 | 備註，可能為空 |
| timestamp | | string | 10 | 1730456083 | 時間戳 |
| sign | 是 | string | 32 | 827ccb0eea8a706c4c34a16891f84e7b | md5(a+b+c+d+g+密鑰)作為簽名，確認請求的合法性 |

##### <span id="112-----">1.1.2 回傳參數</span>

| 參數名稱 | 類型 | 欄位長度 | 範例 | 說明 |
| ------ | ------ | -------- | ------- | ------------------ -------------------------- |
| transaction_id | string | 32 | 23985235 | 交易流水號 |
| status | int | 1 | 1 | 更新結果，1=成功，2=失敗 |
| balance | decimal | 18,2 | 8002.00 | 玩家餘額，如果成功返回最新餘額，如果失敗返回當前餘額 |
| error_code | string | 32 | OUT_OF_BALANCE | 錯誤代碼，詳見[附件2.2錯誤代碼](#22-----)描述 |

### <span id="2-----">2 附件</span>

#### <span id="21-----">2.1 資金變動類型</span>

| 參數 | 資金變動類型 |
| ---- | -------- |
| 1 | 投注本金扣除 |
| 2 | 投注本金回饋 |
| 3 | 派彩 |
| 4 | 其他餘額調整 |

#### <span id="22-----">2.2 錯誤碼</span>

| 參數 | 程式碼意義 |
| ---- | -------- |
| OUT_OF_BALANCE | 餘額不足 |
| OTHERS | 其他情況 |
